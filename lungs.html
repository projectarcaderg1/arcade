<!DOCTYPE html>
<html>
<head>
<title>Respiratory System AR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- A-Frame + AR.js for WebAR -->
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#0a0f2c,#1a0f3d,#2b0f5e);
  color:white;
  text-align:center;
}
header{
  padding:20px;
  font-size:26px;
  font-weight:bold;
  color:#c084fc;
  text-shadow:0 0 10px #a855f7,0 0 20px #6366f1,0 0 40px #3b82f6;
}
button{
  margin:10px;
  padding:12px 20px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:linear-gradient(45deg,#3b82f6,#a855f7);
  color:white;
  cursor:pointer;
}
textarea{
  width:90%;
  height:80px;
  border-radius:10px;
  margin-top:15px;
  padding:10px;
  font-size:14px;
}
.card{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(10px);
  padding:15px;
  border-radius:12px;
  margin:15px;
}
.pop{
  position:absolute;
  font-size:22px;
  animation:popAnim 0.8s forwards;
}
@keyframes popAnim{
  0%{transform:scale(0);opacity:1;}
  100%{transform:scale(2);opacity:0;}
}
</style>
</head>

<body>

<header>ü´Å Respiratory System AR</header>

<!-- Lesson Card -->
<div class="card">
  <p>üìñ Explanation:</p>
  <p id="text">This is the human respiratory system. The lungs help you breathe. Air goes through the trachea into the lungs, oxygen enters your blood, and carbon dioxide is expelled when you exhale.</p>
  <button onclick="speakText(); popEffect(event);">üîä Listen</button>
</div>

<!-- AR Scene -->
<a-scene embedded arjs>
  <a-marker preset="hiro">
    <a-entity gltf-model="ImageToStl.com_respiratory-system.glb" scale="0.5 0.5 0.5" position="0 0 0"></a-entity>
  </a-marker>
  <a-entity camera></a-entity>
</a-scene>

<!-- Reflection + Points -->
<div class="card">
  <p>‚úçÔ∏è Reflection: What did you observe?</p>
  <textarea id="reflection" placeholder="Type your thoughts here..."></textarea>
  <button onclick="submitReflection(); popEffect(event);">‚úÖ Submit Reflection</button>
  <p id="points"></p>
</div>

<script>
/* Talking Explanation */
function speakText(){
  const text = document.getElementById("text").innerText;
  const synth = window.speechSynthesis;
  const utterance = new SpeechSynthesisUtterance(text);
  synth.speak(utterance);
}

/* Reflection + Points */
let points = 0;
function submitReflection(){
  const reflection = document.getElementById("reflection").value;
  if(reflection.length>5){
    points += 10;
    document.getElementById("points").innerText="üéâ You earned 10 points! Total: "+points;
    document.getElementById("reflection").value="";
  } else {
    alert("Please write more about your observation!");
  }
}

/* Emoji pop on click */
function popEffect(e){
  const emojis=["‚ú®","‚≠ê","üöÄ","üí´","üß¨"];
  const emoji=document.createElement("div");
  emoji.className="pop";
  emoji.innerText=emojis[Math.floor(Math.random()*emojis.length)];
  emoji.style.left=e.pageX+"px";
  emoji.style.top=e.pageY+"px";
  document.body.appendChild(emoji);
  setTimeout(()=>emoji.remove(),800);
}
</script>

</body>
</html>
